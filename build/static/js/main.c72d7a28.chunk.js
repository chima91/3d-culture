(this["webpackJsonp3d-test_react"]=this["webpackJsonp3d-test_react"]||[]).push([[0],{150:function(e,t){},234:function(e,t){},236:function(e,t){},259:function(e,t,n){"use strict";n.r(t);var r,a,i,c,l,o,s,d,u,b,j,v,O,m,h,f,p,x,g,_,w,y,k,N,S=n(0),C=n.n(S),I=n(38),R=n.n(I),U=n(41),$=n(25),E=n(11),F=n(305),T=n(306),M=n(304),L=n(348),A=n(307),B=n(141),P=n.n(B),D=n(24),W=n(189),q=n(301),z=Object(q.a)({root:{maxWidth:"100%"}}),Q=n(1),H=function(){var e=z();return Object(Q.jsx)(U.b,{to:"/",children:Object(Q.jsx)("img",{className:e.root,src:"/static/logo.png",alt:"Culpticon Logo"})})},V=n(205),G=n(349),J=Object(q.a)({root:{paddingLeft:10,display:"flex",alignItems:"center",maxWidth:700,flex:1,overflow:"hidden",marginLeft:10},input:{width:"100%"},searchIcon:{width:80,height:34,backgroundColor:"#F4F4F4",borderLeft:"1px solid #CCCCCC",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","&:hover":{opacity:.72}}}),K=Object(D.b)({key:"SearchWords",default:void 0}),Y=function(){var e=J(),t=Object(S.useRef)(null),n=Object(D.c)(K),r=Object(E.a)(n,2),a=r[0],i=r[1];return Object(Q.jsxs)(V.a,{className:e.root,elevation:0,variant:"outlined",children:[Object(Q.jsx)(G.a,{className:e.input,placeholder:"\u691c\u7d22",inputRef:t,defaultValue:null===a||void 0===a?void 0:a.title}),Object(Q.jsx)("div",{className:e.searchIcon,children:Object(Q.jsx)(M.a,{onClick:function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.value;i(n?{title:n}:void 0)},children:Object(Q.jsx)(P.a,{})})})]})},Z=Object(q.a)({between:{justifyContent:"space-between"},flex:{display:"flex"},logo:{width:150,marginLeft:10},profileIcon:{padding:0,width:44,height:44,marginLeft:10}}),X=Object(D.b)({key:"GlobalUser",default:void 0}),ee=function(){var e=Z(),t=(Object(D.d)(X),Object($.g)(),Object(S.useState)(null)),n=Object(E.a)(t,2),r=(n[0],n[1],Object(W.useMediaQuery)({query:"(min-width: 768px)"})),a=Object(S.useState)(!1),i=Object(E.a)(a,2),c=i[0],l=i[1];return Object(Q.jsx)(F.a,{color:"inherit",elevation:1,children:Object(Q.jsxs)(T.a,{className:e.between,children:[Object(Q.jsx)("div",{className:e.flex,children:Object(Q.jsx)("div",{className:e.logo,children:Object(Q.jsx)(H,{})})}),r&&Object(Q.jsx)(Y,{}),!r&&Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(M.a,{onClick:function(){l(!0)},children:Object(Q.jsx)(P.a,{})}),Object(Q.jsx)(L.a,{fullWidth:!0,open:c,onClose:function(){l(!1)},"aria-labelledby":"responsive-dialog-title",children:Object(Q.jsx)(A.a,{children:Object(Q.jsx)(Y,{})})})]})]})})},te=n(308),ne=n(309),re=n(310),ae=n(311),ie=n(190),ce=n.n(ie),le=n(191),oe=n.n(le),se=Object(q.a)({root:{backgroundColor:"#ffffff",minHeight:"100%"}}),de=function(){var e=se(),t=Object(D.d)(X);return Object(Q.jsxs)(te.a,{className:e.root,component:"nav",children:[Object(Q.jsxs)(ne.a,{button:!0,component:U.b,to:"/",children:[Object(Q.jsx)(re.a,{children:Object(Q.jsx)(ce.a,{})}),Object(Q.jsx)(ae.a,{primary:"\u30db\u30fc\u30e0"})]}),(null===t||void 0===t?void 0:t.id)&&Object(Q.jsxs)(ne.a,{button:!0,component:U.b,to:"/channels",children:[Object(Q.jsx)(re.a,{children:Object(Q.jsx)(oe.a,{})}),Object(Q.jsx)(ae.a,{primary:"\u767b\u9332\u30c1\u30e3\u30f3\u30cd\u30eb"})]})]})},ue=Object(q.a)({root:{display:"flex",minHeight:"100%"},sidebar:{paddingTop:64,width:240,"@media (max-width: 600px)":{display:"none"}},main:{paddingTop:94,flexGrow:1}}),be=function(){var e=ue();return Object(Q.jsxs)("div",{className:e.root,children:[Object(Q.jsx)(ee,{}),Object(Q.jsx)("div",{className:e.sidebar,children:Object(Q.jsx)(de,{})}),Object(Q.jsx)("div",{className:e.main,children:Object(Q.jsx)($.b,{})})]})},je=Object(q.a)({root:{minHeight:"100%"},main:{paddingTop:94}}),ve=function(){var e=je();return Object(Q.jsxs)("div",{className:e.root,children:[Object(Q.jsx)(ee,{}),Object(Q.jsx)("div",{className:e.main,children:Object(Q.jsx)($.b,{})})]})},Oe=Object(q.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100%"}}),me=function(){var e=Oe();return Object(Q.jsx)("div",{className:e.root,children:Object(Q.jsx)($.b,{})})},he=n(18),fe=n.n(he),pe=n(30),xe=n(332),ge=n(333),_e=n(350),we=n(13),ye=n(51),ke=n(341),Ne=n(353),Se=n(316),Ce=n(317),Ie={};!function(e){e.Id="id",e.Views="views"}(m||(m={})),function(e){e.ModelsPkey="models_pkey"}(h||(h={})),function(e){e.CreatedAt="created_at",e.Description="description",e.Id="id",e.ModelUrl="model_url",e.OwnerId="owner_id",e.ThumbnailUrl="thumbnail_url",e.Title="title",e.UpdatedAt="updated_at",e.Views="views"}(f||(f={})),function(e){e.CreatedAt="created_at",e.Description="description",e.Id="id",e.ModelUrl="model_url",e.OwnerId="owner_id",e.ThumbnailUrl="thumbnail_url",e.Title="title",e.UpdatedAt="updated_at",e.Views="views"}(p||(p={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(x||(x={})),function(e){e.SubscribersPkey="subscribers_pkey"}(g||(g={})),function(e){e.CreatedAt="created_at",e.SubscribeId="subscribe_id",e.UpdatedAt="updated_at",e.Userid="userid"}(_||(_={})),function(e){e.CreatedAt="created_at",e.SubscribeId="subscribe_id",e.UpdatedAt="updated_at",e.Userid="userid"}(w||(w={})),function(e){e.UsersPkey="users_pkey"}(y||(y={})),function(e){e.CreatedAt="created_at",e.Email="email",e.Id="id",e.Name="name",e.ProfilePhotoUrl="profile_photo_url",e.UpdatedAt="updated_at"}(k||(k={})),function(e){e.CreatedAt="created_at",e.Email="email",e.Id="id",e.Name="name",e.ProfilePhotoUrl="profile_photo_url",e.UpdatedAt="updated_at"}(N||(N={}));var Re=Object(ke.a)(r||(r=Object(ye.a)(['\n    mutation InsertModel($id: String!, $title: String!, $description: String = "", $model_url: String!, $thumbnail_url: String!, $owner_id: String!) {\n  insert_models_one(\n    object: {id: $id, title: $title, description: $description, model_url: $model_url, thumbnail_url: $thumbnail_url, owner_id: $owner_id, views: 0}\n  ) {\n    id\n    description\n    created_at\n    model_url\n    owner_id\n    thumbnail_url\n    title\n    updated_at\n    views\n  }\n}\n    '])));Object(ke.a)(a||(a=Object(ye.a)(['\n    mutation InsertUser($id: String!, $name: String!, $email: String!) {\n  insert_users_one(\n    object: {id: $id, name: $name, email: $email, profile_photo_url: ""}\n  ) {\n    id\n    name\n    email\n    profile_photo_url\n    created_at\n    updated_at\n  }\n}\n    '])));var Ue=Object(ke.a)(i||(i=Object(ye.a)(["\n    mutation deleteSubscribe($subscribe_id: String!, $userid: String!) {\n  delete_subscribers_by_pk(subscribe_id: $subscribe_id, userid: $userid) {\n    userid\n    subscribe_id\n  }\n}\n    "])));var $e=Object(ke.a)(c||(c=Object(ye.a)(["\n    mutation InsertSubscribe($userid: String!, $subscribe_id: String!) {\n  insert_subscribers_one(object: {userid: $userid, subscribe_id: $subscribe_id}) {\n    userid\n    subscribe_id\n  }\n}\n    "])));var Ee=Object(ke.a)(l||(l=Object(ye.a)(['\n    mutation updateModel($id: String!, $title: String!, $description: String = "", $model_url: String!, $thumbnail_url: String!) {\n  update_models_by_pk(\n    pk_columns: {id: $id}\n    _set: {title: $title, description: $description, model_url: $model_url, thumbnail_url: $thumbnail_url}\n  ) {\n    id\n    title\n    model_url\n    thumbnail_url\n    created_at\n    updated_at\n    owner {\n      id\n    }\n  }\n}\n    '])));var Fe=Object(ke.a)(o||(o=Object(ye.a)(["\n    mutation updateModelViews($modelId: String!) {\n  update_model_views(where: {id: {_eq: $modelId}}, _inc: {views: 1}) {\n    returning {\n      id\n      views\n    }\n  }\n}\n    "])));function Te(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ne.a(Fe,t)}var Me=Object(ke.a)(s||(s=Object(ye.a)(["\n    mutation updateUser($id: String!, $name: String!, $profile_photo_url: String) {\n  update_users_by_pk(\n    pk_columns: {id: $id}\n    _set: {name: $name, profile_photo_url: $profile_photo_url}\n  ) {\n    id\n    name\n    email\n    profile_photo_url\n    created_at\n    updated_at\n    subscribersByUserid {\n      subscribe_id\n    }\n  }\n}\n    "])));var Le=Object(ke.a)(d||(d=Object(ye.a)(["\n    query ChannelList($id: String!) {\n  users_by_pk(id: $id) {\n    name\n    subscribersByUserid(order_by: {created_at: desc_nulls_last}) {\n      subscribed {\n        name\n        id\n        profile_photo_url\n        usersModelArrayRelation(order_by: {created_at: desc_nulls_last}, limit: 3) {\n          id\n          title\n          description\n          thumbnail_url\n          model_url\n          views\n          created_at\n          updated_at\n        }\n      }\n    }\n  }\n}\n    "])));var Ae=Object(ke.a)(u||(u=Object(ye.a)(["\n    query ModelByPk($id: String!) {\n  models_by_pk(id: $id) {\n    id\n    description\n    title\n    thumbnail_url\n    model_url\n    views\n    created_at\n    updated_at\n    owner {\n      id\n      name\n      profile_photo_url\n      email\n      updated_at\n      created_at\n    }\n  }\n}\n    "])));function Be(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Se.a(Ae,t)}var Pe=Object(ke.a)(b||(b=Object(ye.a)(["\n    query Models {\n  models(order_by: {created_at: desc}) {\n    id\n    title\n    description\n    thumbnail_url\n    model_url\n    owner {\n      id\n      email\n      name\n      profile_photo_url\n      updated_at\n      created_at\n    }\n    views\n    updated_at\n    created_at\n  }\n}\n    "])));var De=Object(ke.a)(j||(j=Object(ye.a)(["\n    query RecommendModels($currentModelId: String!) {\n  models(where: {id: {_neq: $currentModelId}}, order_by: {views: desc}) {\n    id\n    title\n    description\n    thumbnail_url\n    model_url\n    views\n    owner {\n      id\n      name\n      profile_photo_url\n      updated_at\n      email\n      created_at\n    }\n    created_at\n    updated_at\n  }\n}\n    "])));var We=Object(ke.a)(v||(v=Object(ye.a)(["\n    query Subscribers($ownerid: String!) {\n  subscribers(where: {subscribe_id: {_eq: $ownerid}}) {\n    userid\n  }\n}\n    "])));var qe=Object(ke.a)(O||(O=Object(ye.a)(["\n    query UserById($id: String!) {\n  users_by_pk(id: $id) {\n    id\n    name\n    email\n    profile_photo_url\n    created_at\n    updated_at\n    subscribersByUserid {\n      subscribe_id\n    }\n  }\n}\n    "])));var ze=function(){var e=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ne.a($e,t)}({refetchQueries:[qe,We]}),t=Object(E.a)(e,2),n=t[0],r=t[1],a=r.data,i=r.error;return{subscribe:function(){var e=Object(pe.a)(fe.a.mark((function e(t){var r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userid,a=t.subscribeId,!r||!a){e.next=11;break}return e.prev=2,e.next=5,n({variables:{userid:r,subscribe_id:a}});case 5:i&&console.log(i.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),new Error("\u30c1\u30e3\u30f3\u30cd\u30eb\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),data:a,error:i}},Qe=function(){var e=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ne.a(Ue,t)}({refetchQueries:[qe,We]}),t=Object(E.a)(e,2),n=t[0],r=t[1],a=r.data,i=r.error;return{unsubscribe:function(){var e=Object(pe.a)(fe.a.mark((function e(t){var r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.userid,a=t.subscribeId,!r||!a){e.next=11;break}return e.prev=2,e.next=5,n({variables:{userid:r,subscribe_id:a}});case 5:i&&console.log(i.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),new Error("\u30c1\u30e3\u30f3\u30cd\u30eb\u767b\u9332\u306e\u89e3\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),data:a,error:i}},He=n(319),Ve=n(320),Ge=n(67),Je=n(321),Ke=n(322),Ye=n(323),Ze=n(197),Xe=n.n(Ze),et=n(148),tt=n.n(et),nt=n(35),rt=n(347),at=n(318),it=n(354),ct=n(344),lt=function(e){var t=e.glbSrc,n=rt.a(t).scene;return Object(Q.jsxs)(nt.a,{children:[Object(Q.jsx)(at.a,{makeDefault:!0,fov:60}),Object(Q.jsx)(it.a,{enablePan:!0,enableZoom:!0,enableRotate:!0}),Object(Q.jsx)(ct.a,{children:Object(Q.jsx)("group",{dispose:null,children:Object(Q.jsx)("primitive",{scale:[10,10,10],object:n})})})]})},ot=Object(q.a)({descPadding:{paddingLeft:56},canvas:{maxWidth:"1000px",height:"450px",backgroundColor:"#282828"},channelBtn:{display:"flex",marginLeft:15}}),st=function(e){var t=e.modelId,n=e.title,r=e.created,a=e.owner,i=e.avatar,c=e.description,l=e.views,o=e.subscribers,s=e.isCurrentModelByOthers,d=e.isCurrentModelByMine,u=e.isSubscribed,b=e.onSubscribe,j=e.onUnSubscribe,v=e.fetcher,O=ot(),m=Object(S.useState)(),h=Object(E.a)(m,2),f=h[0],p=h[1];return Object(S.useEffect)((function(){v().then(p)})),Object(Q.jsxs)(He.a,{children:[Object(Q.jsx)(Ve.a,{className:O.canvas,children:Object(Q.jsx)(S.Suspense,{fallback:Object(Q.jsx)("div",{style:{color:"white",textAlign:"center",marginTop:100},children:"Now Loading..."}),children:f?Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(lt,{glbSrc:f})}):Object(Q.jsx)(Q.Fragment,{})})}),Object(Q.jsxs)(Ve.a,{children:[Object(Q.jsx)(Ge.a,{component:"h2",variant:"h4",children:n}),Object(Q.jsx)(Ge.a,{variant:"body2",color:"textSecondary",children:r?new Date(r).toLocaleDateString():""}),Object(Q.jsxs)(Ge.a,{variant:"body2",color:"textSecondary",children:["\u95b2\u89a7\u56de\u6570\uff1a",l,"\u56de"]})]}),Object(Q.jsx)(Je.a,{}),Object(Q.jsx)(Ke.a,{avatar:i,title:a,subheader:"\u30c1\u30e3\u30f3\u30cd\u30eb\u767b\u9332\u8005\u6570\uff1a".concat(o||0,"\u4eba")}),s&&Object(Q.jsx)("div",{className:O.channelBtn,children:u?Object(Q.jsx)(Ye.a,{variant:"contained",color:"default",onClick:j,startIcon:Object(Q.jsx)(tt.a,{}),children:"\u30c1\u30e3\u30f3\u30cd\u30eb\u767b\u9332\u89e3\u9664"}):Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",onClick:b,startIcon:Object(Q.jsx)(Xe.a,{}),children:"\u30c1\u30e3\u30f3\u30cd\u30eb\u767b\u9332"})}),Object(Q.jsx)(Ve.a,{className:O.descPadding,children:Object(Q.jsx)(Ge.a,{children:c})}),d&&Object(Q.jsx)(U.b,{to:"/detail/".concat(t,"/update"),style:{textDecoration:"none"},children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",style:{margin:50},children:"\u7de8\u96c6\u3059\u308b"})})]})},dt=n(324),ut=Object(q.a)({root:{lineHeight:1.2}}),bt=function(e){var t=e.title,n=ut();return Object(Q.jsx)(Ge.a,{className:n.root,variant:"subtitle1",component:"h3",children:t})},jt=function(e){var t=e.owner,n=e.created,r=e.views;return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:t}),Object(Q.jsx)(Ge.a,{variant:"body2",children:n&&new Date(n).toLocaleDateString()}),Object(Q.jsxs)(Ge.a,{variant:"body2",children:["\u95b2\u89a7\u56de\u6570\uff1a",r,"\u56de"]})]})},vt=Object(q.a)({root:{display:"flex",backgroundColor:"transparent"},thumbnail:{width:"50%"},media:{paddingTop:"56.25%"},contentPadding:{width:"50%",paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:10}}),Ot=function(e){var t=e.fetcher,n=e.title,r=e.owner,a=e.created,i=e.views,c=e.onClick,l=vt(),o=Object(S.useState)(),s=Object(E.a)(o,2),d=s[0],u=s[1];return Object(S.useEffect)((function(){t().then(u)})),Object(Q.jsxs)(He.a,{className:l.root,elevation:0,square:!0,onClick:c,children:[Object(Q.jsx)("div",{className:l.thumbnail,children:Object(Q.jsx)(dt.a,{className:l.media,image:d||"/static/no-image.jpg",title:"Thumbnail"})}),Object(Q.jsx)(Ke.a,{className:l.contentPadding,title:Object(Q.jsx)(bt,{title:n}),subheader:Object(Q.jsx)(jt,{owner:r,created:a,views:i})})]})},mt=n(325),ht=n(199),ft=n.n(ht),pt=n(198),xt=function(){var e=Object(pt.a)({text:window.location.href,options:{level:"M",margin:3,scale:1,width:200}}),t=Object(E.a)(e,1)[0];return Object(Q.jsx)("canvas",{ref:t})},gt=function(){var e=Object(S.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1];return Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)(Ye.a,{onClick:function(){return r(!0)},variant:"outlined",color:"secondary",endIcon:Object(Q.jsx)(ft.a,{}),style:{marginBottom:20},children:"QR\u30b3\u30fc\u30c9"}),Object(Q.jsxs)(L.a,{onClose:function(){return r(!1)},open:n,children:[Object(Q.jsx)(mt.a,{style:{textAlign:"center",padding:10,margin:0},children:"\u3053\u308c\u3067\u5e03\u6559\u3057\u3066\u304f\u3060\u3055\u3044m(._.)m"}),Object(Q.jsx)(Je.a,{}),Object(Q.jsx)(A.a,{children:Object(Q.jsx)(xt,{})})]})]})},_t=n(326),wt=n(327),yt=n(328),kt=n(329),Nt=n(330),St=n(331),Ct=function(){return Object(Q.jsxs)("span",{style:{marginLeft:15},children:[Object(Q.jsx)(_t.a,{url:window.location.href,title:"\u300cCulpticon\u300d\u30673D\u306e\u6587\u5316\u8ca1\u3092\u697d\u3057\u3082\u3046!",style:{margin:5},children:Object(Q.jsx)(wt.a,{size:32,round:!0})}),Object(Q.jsx)(yt.a,{url:window.location.href,title:"\u300cCulpticon\u300d\u30673D\u306e\u6587\u5316\u8ca1\u3092\u697d\u3057\u3082\u3046!",style:{margin:5},children:Object(Q.jsx)(kt.a,{size:32,round:!0})}),Object(Q.jsx)(Nt.a,{url:window.location.href,quote:"\u300cCulpticon\u300d\u30673D\u306e\u6587\u5316\u8ca1\u3092\u697d\u3057\u3082\u3046!",style:{margin:5},children:Object(Q.jsx)(St.a,{size:32,round:!0})})]})},It=Object(q.a)({root:{maxWidth:1400},cardPadding:{marginBottom:10}}),Rt=n(110);n(256),n(260),n(261);Rt.a.initializeApp({apiKey:"AIzaSyBcaCwPXi3F4a0uz3JGkMZNIy3i9PmVNS8",authDomain:"react-3d-f49c6.firebaseapp.com",projectId:"react-3d-f49c6",storageBucket:"react-3d-f49c6.appspot.com",messagingSenderId:"419875646774",appId:"1:419875646774:web:ab2657b7d6289c74d59797",measurementId:"G-GCMW5GDSDY"});var Ut=Rt.a.auth(),$t=Rt.a.storage(),Et=(Rt.a.firestore(),Rt.a,function(){var e,t,n,r,a,i,c,l,o,s,d,u,b,j,v,O,m=It(),h=Object($.h)().objId,f=Be({variables:{id:h}}).data,p=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Se.a(De,t)}({variables:{currentModelId:h}}).data,x=null===p||void 0===p?void 0:p.models.slice(0,6),g=Te({refetchQueries:[{query:Pe}]}),_=Object(E.a)(g,2),w=_[0],y=_[1].error,k=function(){var e=Object(pe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({variables:{modelId:t}});case 2:y&&console.log(y.message);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Se.a(We,t)}({variables:{ownerid:(null===f||void 0===f||null===(e=f.models_by_pk)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||""}}).data,S=ze(),C=S.subscribe,I=S.error,R=function(){var e=Object(pe.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({userid:t,subscribeId:n});case 2:I&&console.log(I.message);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=Qe(),T=F.unsubscribe,M=F.error,L=function(){var e=Object(pe.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({userid:t,subscribeId:n});case 2:M&&console.log(M.message);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=Object(D.d)(X),B=1===(null===A||void 0===A||null===(n=A.subscribersByUserid)||void 0===n?void 0:n.filter((function(e){var t,n;return e.subscribe_id===(null===f||void 0===f||null===(t=f.models_by_pk)||void 0===t||null===(n=t.owner)||void 0===n?void 0:n.id)})).length),P=(null===A||void 0===A?void 0:A.id)&&A.id!==(null===f||void 0===f||null===(r=f.models_by_pk)||void 0===r||null===(a=r.owner)||void 0===a?void 0:a.id),W=(null===A||void 0===A?void 0:A.id)&&A.id===(null===f||void 0===f||null===(i=f.models_by_pk)||void 0===i||null===(c=i.owner)||void 0===c?void 0:c.id);return Object(Q.jsxs)(xe.a,{className:m.root,children:[Object(Q.jsx)(gt,{}),Object(Q.jsx)(Ct,{}),Object(Q.jsxs)(ge.a,{container:!0,spacing:4,children:[Object(Q.jsx)(ge.a,{item:!0,xs:12,lg:8,children:Object(Q.jsx)(st,{modelId:null===f||void 0===f||null===(l=f.models_by_pk)||void 0===l?void 0:l.id,title:null===f||void 0===f||null===(o=f.models_by_pk)||void 0===o?void 0:o.title,created:null===f||void 0===f||null===(s=f.models_by_pk)||void 0===s?void 0:s.created_at,owner:null===f||void 0===f||null===(d=f.models_by_pk)||void 0===d||null===(u=d.owner)||void 0===u?void 0:u.name,avatar:Object(Q.jsx)(_e.a,{src:null===f||void 0===f||null===(b=f.models_by_pk)||void 0===b||null===(j=b.owner)||void 0===j?void 0:j.profile_photo_url}),description:null===f||void 0===f||null===(v=f.models_by_pk)||void 0===v?void 0:v.description,views:null===f||void 0===f||null===(O=f.models_by_pk)||void 0===O?void 0:O.views,subscribers:(null===N||void 0===N?void 0:N.subscribers.length)||0,isCurrentModelByOthers:P||!1,isCurrentModelByMine:W||!1,isSubscribed:B,fetcher:Object(pe.a)(fe.a.mark((function e(){var t;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===f||void 0===f||null===(t=f.models_by_pk)||void 0===t?void 0:t.model_url)){e.next=2;break}return e.abrupt("return",$t.ref(f.models_by_pk.model_url).getDownloadURL());case 2:return e.abrupt("return",void 0);case 3:case"end":return e.stop()}}),e)}))),onSubscribe:function(){var e,t;R((null===A||void 0===A?void 0:A.id)||"",(null===f||void 0===f||null===(e=f.models_by_pk)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||"")},onUnSubscribe:function(){var e,t;L((null===A||void 0===A?void 0:A.id)||"",(null===f||void 0===f||null===(e=f.models_by_pk)||void 0===e||null===(t=e.owner)||void 0===t?void 0:t.id)||"")}})}),Object(Q.jsx)(ge.a,{item:!0,xs:12,lg:4,children:null===x||void 0===x?void 0:x.map((function(e){var t;return Object(Q.jsx)("div",{className:m.cardPadding,children:Object(Q.jsx)(U.b,{to:"/detail/".concat(e.id),style:{textDecoration:"none"},children:Object(Q.jsx)(Ot,{title:e.title,owner:(null===(t=e.owner)||void 0===t?void 0:t.name)||"",created:e.created_at,views:e.views,fetcher:function(){return $t.ref(e.thumbnail_url).getDownloadURL()},onClick:function(){return k(e.id)}})})},e.id)}))})]})]})}),Ft=n(339),Tt=Object(q.a)({root:{width:"95%",maxWidth:550,padding:"50px 70px"},margin:{marginBottom:40},logo:{width:150},label:{display:"block"}}),Mt=function(e,t,n){var r=Object($.g)(),a=Object(S.useState)(new Map),i=Object(E.a)(a,2),c=i[0],l=i[1],o=Object(S.useState)(!1),s=Object(E.a)(o,2),d=s[0],u=s[1],b=function(e,t){l((function(n){return new Map(n.set(e,t))}))},j=function(){var a=Object(pe.a)(fe.a.mark((function a(){return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(l(new Map),!t(b)){a.next=4;break}return a.abrupt("return");case 4:return u(!0),a.prev=5,a.next=8,e();case 8:u(!1),n&&r(n),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(5),b("main",a.t0.message),u(!1);case 16:case"end":return a.stop()}}),a,null,[[5,12]])})));return function(){return a.apply(this,arguments)}}();return{error:c,loading:d,setErrorHandler:b,authExecute:j}},Lt=function(){var e=Tt(),t=function(){var e=Object(S.useRef)(null),t=Object(S.useState)(!1),n=Object(E.a)(t,2),r=n[0],a=n[1],i=Mt(function(){var t=Object(pe.a)(fe.a.mark((function t(){var n;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r=(null===(n=e.current)||void 0===n?void 0:n.value)||"",Ut.sendPasswordResetEmail(r);case 2:a(!0);case 3:case"end":return t.stop()}var r}),t)})));return function(){return t.apply(this,arguments)}}(),(function(t){var n;return!(null===(n=e.current)||void 0===n?void 0:n.value)&&(t("email","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),!0)})),c=i.authExecute,l=i.error,o=i.loading;return{ref:{emailRef:e},loading:o,error:l,sendEmail:c,sendSuccess:r}}(),n=t.ref,r=t.sendEmail,a=t.sendSuccess,i=t.loading,c=t.error;return Object(Q.jsxs)(He.a,{className:e.root,variant:"outlined",children:[Object(Q.jsx)("div",{className:"".concat(e.logo," ").concat(e.margin),children:Object(Q.jsx)(H,{})}),Object(Q.jsx)(Ge.a,{className:e.margin,component:"h1",variant:"h5",children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u767a\u884c"}),c.has("main")&&Object(Q.jsx)(Ge.a,{className:e.margin,color:"error",children:c.get("main")}),Object(Q.jsxs)("label",{className:"".concat(e.label," ").concat(e.margin),children:[Object(Q.jsx)(Ge.a,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(Q.jsx)(Ft.a,{type:"email",required:!0,size:"small",fullWidth:!0,variant:"outlined",inputRef:n.emailRef,error:c.has("email"),helperText:c.has("email")?c.get("email"):""})]}),a&&Object(Q.jsx)(Ge.a,{className:e.margin,color:"primary",children:"\u2714\ufe0e\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002"}),Object(Q.jsx)("div",{className:e.margin,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",disabled:i,onClick:r,children:i?"\u518d\u767a\u884c\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u4e2d":"\u518d\u767a\u884c\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b"})}),Object(Q.jsx)("div",{children:Object(Q.jsx)(Ye.a,{href:"/login",color:"primary",children:"\u30ed\u30b0\u30a4\u30f3\u306f\u3053\u3061\u3089"})})]})},At=Object(q.a)({root:{maxWidth:360,backgroundColor:"transparent"},media:{height:0,paddingTop:"56.25%"}}),Bt=function(e){var t=e.fetcher,n=e.onClick,r=e.avatar,a=e.title,i=e.owner,c=e.created,l=e.views,o=At(),s=Object(S.useState)(),d=Object(E.a)(s,2),u=d[0],b=d[1];return Object(S.useEffect)((function(){t().then(b)})),Object(Q.jsxs)(He.a,{onClick:n,children:[Object(Q.jsx)(dt.a,{className:o.media,image:u||"/static/no-image.jpg",title:"Thumbnail"}),Object(Q.jsx)(Ke.a,{avatar:r,title:Object(Q.jsx)(bt,{title:a}),subheader:Object(Q.jsx)(jt,{owner:i,created:c,views:l})})]})},Pt=function(){return Object(Q.jsxs)("div",{style:{margin:20,marginTop:-10},children:[Object(Q.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://docs.google.com/forms/d/e/1FAIpQLSdr2KB126AsYkRUkkv44TQMpeKkbq9ZetaMYRDD4rR-W4V0IQ/viewform",children:"Culpticon\u306e\u30a2\u30f3\u30b1\u30fc\u30c8"}),Object(Q.jsx)("span",{children:"\u306b\u305c\u3072\u3054\u5354\u529b\u304f\u3060\u3055\u3044\uff01"})]})},Dt=n(343),Wt=Object(q.a)({stack:{backgroundColor:"transparent",width:"100%",padding:"1rem",textAlign:"center"},pagination:{display:"inline-block"}}),qt=function(e){var t=e.totalPage,n=e.currentPage,r=e.handleChange,a=Wt();return Object(Q.jsx)("div",{className:a.stack,children:Object(Q.jsx)(Dt.a,{count:t,page:n,onChange:function(e,t){return r(t)},className:a.pagination})})},zt=function(){var e=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Se.a(Pe,t)}(),t=e.data,n=e.error;Object(S.useEffect)((function(){n&&console.error(n)}),[n]);var r=Object(D.d)(K),a=r&&t?t.models.filter((function(e){var t;return null===(t=e.title)||void 0===t?void 0:t.match(r.title||"")})):null===t||void 0===t?void 0:t.models,i=Object(S.useState)(1),c=Object(E.a)(i,2),l=c[0],o=c[1],s=Object(S.useState)(0),d=Object(E.a)(s,2),u=d[0],b=d[1],j=Math.floor((((null===a||void 0===a?void 0:a.length)||0)-1)/8)+1,v=null===a||void 0===a?void 0:a.slice(u,u+8),O=Te({refetchQueries:[{query:Pe}]}),m=Object(E.a)(O,2),h=m[0],f=m[1].error,p=function(){var e=Object(pe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h({variables:{modelId:t}});case 2:f&&console.log(f.message);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=Object(D.d)(X);return console.log("globalUser(Home page):",x),Object(Q.jsxs)(xe.a,{children:[Object(Q.jsx)(gt,{}),Object(Q.jsx)(Ct,{}),Object(Q.jsx)(Pt,{}),Object(Q.jsx)(ge.a,{container:!0,spacing:2,children:null===v||void 0===v?void 0:v.map((function(e){var t,n;return Object(Q.jsx)(ge.a,{item:!0,xs:12,md:6,lg:3,children:Object(Q.jsx)(U.b,{to:"/detail/".concat(e.id),style:{textDecoration:"none"},children:Object(Q.jsx)(Bt,{title:e.title||"No Title",owner:(null===(t=e.owner)||void 0===t?void 0:t.name)||"",created:e.created_at,views:e.views,fetcher:function(){return $t.ref(e.thumbnail_url||"").getDownloadURL()},onClick:function(){return p(e.id)},avatar:Object(Q.jsx)(_e.a,{src:(null===(n=e.owner)||void 0===n?void 0:n.profile_photo_url)||""})})})},e.id)}))}),Object(Q.jsx)(qt,{totalPage:j,currentPage:l,handleChange:function(e){return function(e){o(e),b(8*(e-1))}(e)}})]})},Qt=function(e){var t=e.email,n=e.password;return Ut.signInWithEmailAndPassword(t,n)},Ht=function(){var e=Tt(),t=function(){var e=Object(S.useRef)(null),t=Object(S.useRef)(null),n=Mt(function(){var n=Object(pe.a)(fe.a.mark((function n(){var r,a,i,c;return fe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Qt({email:(null===(r=e.current)||void 0===r?void 0:r.value)||"",password:(null===(a=t.current)||void 0===a?void 0:a.value)||""});case 2:if(i=n.sent,null===(c=i.user)||void 0===c?void 0:c.uid){n.next=6;break}throw new Error("\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002");case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),(function(n){var r,a,i=!1;return(null===(r=e.current)||void 0===r?void 0:r.value)||(n("email","\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),i=!0),(null===(a=t.current)||void 0===a?void 0:a.value)||(n("password","\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),i=!0),i}),"/"),r=n.authExecute,a=n.error,i=n.loading;return{ref:{emailRef:e,passwordRef:t},login:r,error:a,loading:i}}(),n=t.ref,r=t.error,a=t.loading,i=t.login;return Object(Q.jsxs)(He.a,{className:e.root,variant:"outlined",children:[Object(Q.jsx)("div",{className:"".concat(e.logo," ").concat(e.margin),children:Object(Q.jsx)(H,{})}),Object(Q.jsx)(Ge.a,{className:e.margin,component:"h1",variant:"h5",children:"\u30ed\u30b0\u30a4\u30f3"}),r.has("main")&&Object(Q.jsx)(Ge.a,{className:e.margin,color:"error",children:r.get("main")}),Object(Q.jsxs)("label",{className:"".concat(e.label," ").concat(e.margin),children:[Object(Q.jsx)(Ge.a,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(Q.jsx)(Ft.a,{type:"email",required:!0,size:"small",fullWidth:!0,variant:"outlined",inputRef:n.emailRef,error:r.has("email"),helperText:r.has("email")?r.get("email"):""})]}),Object(Q.jsxs)("label",{className:"".concat(e.label," ").concat(e.margin),children:[Object(Q.jsx)(Ge.a,{children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(Q.jsx)(Ft.a,{type:"password",required:!0,size:"small",fullWidth:!0,variant:"outlined",inputRef:n.passwordRef,error:r.has("password"),helperText:r.has("password")?r.get("password"):""})]}),Object(Q.jsx)("div",{className:e.margin,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",disabled:a,onClick:i,children:a?"\u30ed\u30b0\u30a4\u30f3\u4e2d":"\u30ed\u30b0\u30a4\u30f3\u3059\u308b"})}),Object(Q.jsx)("div",{children:Object(Q.jsx)(Ye.a,{href:"/signup",color:"primary",children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u4f5c\u6210\u306f\u3053\u3061\u3089"})}),Object(Q.jsx)("div",{children:Object(Q.jsx)(Ye.a,{href:"/forget",color:"primary",children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5fd8\u308c\u305f\u5834\u5408\u306f\u3053\u3061\u3089"})})]})},Vt=n(334),Gt=function(){var e=Tt(),t=function(){var e=Object($.g)();return{signout:function(){var t=Object(pe.a)(fe.a.mark((function t(){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ut.signOut();case 2:e("/");case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}().signout;return Object(S.useEffect)((function(){t()})),Object(Q.jsxs)(He.a,{className:e.root,variant:"outlined",children:[Object(Q.jsx)(Vt.a,{className:e.margin,size:70,thickness:4}),Object(Q.jsx)(Ge.a,{variant:"h6",children:"\u30ed\u30b0\u30a2\u30a6\u30c8\u4e2d"})]})},Jt=n(335),Kt=n(105),Yt=n.n(Kt),Zt=n(346),Xt=function(){var e=Object(S.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],a=Object(S.useState)(),i=Object(E.a)(a,2),c=i[0],l=i[1],o=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ne.a(Re,t)}({refetchQueries:[{query:Pe}]}),s=Object(E.a)(o,2),d=s[0],u=s[1].error,b=Object(D.d)(X),j=function(e,t,n){var r=t.name.split(".").pop();return $t.ref("".concat(n,"/").concat(e,".").concat(r)).put(t)},v=function(){var e=Object(pe.a)(fe.a.mark((function e(t){var n,a,i,c,o,s,u,v,O,m,h;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,a=t.title,i=t.description,c=t.ownerId,null===b||void 0===b?void 0:b.id){e.next=3;break}return e.abrupt("return");case 3:return r(!0),o=Object(Zt.a)(),s=Object(Zt.a)(),u=Object(Zt.a)(),e.prev=7,e.next=10,j(o,n.model,"models");case 10:return O=e.sent,e.next=13,j(s,n.thumbnail,"thumbnails");case 13:return m=e.sent,e.next=16,d({variables:{id:u,title:a,description:i,model_url:O.ref.fullPath,thumbnail_url:m.ref.fullPath,owner_id:c}});case 16:return h=e.sent,e.abrupt("return",null===(v=h.data)||void 0===v?void 0:v.insert_models_one);case 20:e.prev=20,e.t0=e.catch(7),console.error(e.t0),l(new Error("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002"));case 24:return e.prev=24,r(!1),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[7,20,24,27]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.useEffect)((function(){u&&(console.error(u),l(new Error("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002")))}),[u]),{upload:v,loading:n,error:c}},en=Object(q.a)({label:{display:"block",paddingBottom:40},button:{display:"flex",justifyContent:"center"}}),tn=function(e){var t=e.modelFile,n=e.thumbFile,r=en(),a=Object($.g)(),i=Object(D.d)(X),c=Object(S.useRef)(null),l=Object(S.useRef)(null),o=Object(S.useState)(),s=Object(E.a)(o,2),d=s[0],u=s[1],b=Xt(),j=b.upload,v=b.loading,O=b.error;return Object(S.useEffect)((function(){u(O)}),[O]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("label",{className:r.label,children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:"\u30bf\u30a4\u30c8\u30eb"}),Object(Q.jsx)(Ft.a,{size:"small",fullWidth:!0,variant:"outlined",inputRef:c})]}),Object(Q.jsxs)("label",{className:r.label,children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:"\u8aac\u660e"}),Object(Q.jsx)(Ft.a,{size:"small",fullWidth:!0,variant:"outlined",multiline:!0,rows:4,inputRef:l})]}),(null===d||void 0===d?void 0:d.message)&&Object(Q.jsx)("label",{className:r.label,children:Object(Q.jsx)(Ge.a,{color:"error",children:d.message})}),Object(Q.jsx)("div",{className:r.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",disabled:v,onClick:function(){var e,r;return u(void 0),(null===i||void 0===i?void 0:i.id)?t&&n?(null===(e=c.current)||void 0===e?void 0:e.value)?void j({file:{model:t,thumbnail:n},title:c.current.value,description:null===(r=l.current)||void 0===r?void 0:r.value,ownerId:i.id}).then((function(e){(null===e||void 0===e?void 0:e.id)&&a("/")})):u(new Error("\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002")):u(new Error("\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002")):u(new Error("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"))},children:v?"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u4e2d":"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b"})})]})},nn=Object(q.a)({root:{minHeight:300},textPadding:{paddingTop:20,paddingBottom:10},button:{textAlign:"center",margin:"30px 0"},thumbnail:{paddingTop:"56.25%"}}),rn=function(e){var t=e.modelFile,n=e.thumbFile,r=e.setModelFile,a=e.setThumbFile,i=nn(),c=Object(S.useState)(),l=Object(E.a)(c,2),o=l[0],s=l[1],d=Object(S.useState)(),u=Object(E.a)(d,2),b=u[0],j=u[1],v=Object(S.useRef)(null),O=Object(S.useRef)(null);return Object(S.useEffect)((function(){if(t){var e=URL.createObjectURL(t);s(e)}}),[t]),Object(S.useEffect)((function(){if(n){var e=URL.createObjectURL(n);j(e)}}),[n]),Object(Q.jsxs)("div",{className:i.root,children:[o&&Object(Q.jsx)("div",{children:Object(Q.jsxs)(Ge.a,{className:i.textPadding,children:["\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\uff1a",null===t||void 0===t?void 0:t.name]})}),Object(Q.jsx)("div",{className:i.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",onClick:function(){var e;null===(e=v.current)||void 0===e||e.click()},children:"\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e"})}),Object(Q.jsx)(Je.a,{}),b&&Object(Q.jsxs)("div",{children:[Object(Q.jsxs)(Ge.a,{className:i.textPadding,children:["\u30b5\u30e0\u30cd\u30a4\u30eb\u30d5\u30a1\u30a4\u30eb\uff1a",null===n||void 0===n?void 0:n.name]}),Object(Q.jsx)(dt.a,{className:i.thumbnail,image:b})]}),Object(Q.jsx)("div",{className:i.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",onClick:function(){var e;null===(e=O.current)||void 0===e||e.click()},children:"\u30b5\u30e0\u30cd\u30a4\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e"})}),Object(Q.jsx)("input",{type:"file",hidden:!0,ref:v,onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&r(e.currentTarget.files[0])}}),Object(Q.jsx)("input",{type:"file",hidden:!0,ref:O,onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&a(e.currentTarget.files[0])}})]})},an=Object(q.a)({body:{marginTop:40,marginBottom:40}}),cn=Object(D.b)({key:"AccountLoaded",default:!1}),ln=function(){var e=an(),t=Object(D.d)(cn),n=Object(D.d)(X),r=Object(S.useState)(),a=Object(E.a)(r,2),i=a[0],c=a[1],l=Object(S.useState)(),o=Object(E.a)(l,2),s=o[0],d=o[1],u=Object($.g)(),b=Object(S.useState)(!0),j=Object(E.a)(b,2)[1];return console.log("accountLoaded(Upload page):",t),console.log("globalUser(Upload page):",n),Object(S.useEffect)((function(){t&&((null===n||void 0===n?void 0:n.id)||u("/login"))}),[t,null===n||void 0===n?void 0:n.id]),Object(Q.jsxs)(L.a,{fullWidth:!0,maxWidth:"md",open:!0,children:[Object(Q.jsxs)(Jt.a,{children:["3D\u30e2\u30c7\u30eb\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9",Object(Q.jsx)(M.a,{onClick:function(){j(!1),u("/")},children:Object(Q.jsx)(Yt.a,{})})]}),Object(Q.jsx)(Je.a,{}),Object(Q.jsx)(A.a,{className:e.body,children:(null===n||void 0===n?void 0:n.id)?Object(Q.jsxs)(ge.a,{container:!0,spacing:4,children:[Object(Q.jsx)(ge.a,{xs:!0,item:!0,children:Object(Q.jsx)(rn,{modelFile:i,thumbFile:s,setModelFile:c,setThumbFile:d})}),Object(Q.jsx)(Je.a,{orientation:"vertical",flexItem:!0}),Object(Q.jsx)(ge.a,{xs:!0,item:!0,children:Object(Q.jsx)(tn,{modelFile:i,thumbFile:s})})]}):Object(Q.jsx)(ge.a,{container:!0,justifyContent:"center",children:Object(Q.jsx)(Vt.a,{size:50})})})]})},on=function(){var e=Object(S.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],a=Object(S.useState)(),i=Object(E.a)(a,2),c=i[0],l=i[1],o=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ne.a(Ee,t)}({refetchQueries:[{query:Pe}]}),s=Object(E.a)(o,2),d=s[0],u=s[1].error,b=Object(D.d)(X),j=function(e,t,n){var r=t.name.split(".").pop();return $t.ref("".concat(n,"/").concat(e,".").concat(r)).put(t)},v=function(){var e=Object(pe.a)(fe.a.mark((function e(t){var n,a,i,c,o,s,u,v,O,m;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.modelId,a=t.file,i=t.title,c=t.description,null===b||void 0===b?void 0:b.id){e.next=3;break}return e.abrupt("return");case 3:return r(!0),o=Object(Zt.a)(),s=Object(Zt.a)(),e.prev=6,e.next=9,j(o,a.model,"models");case 9:return v=e.sent,e.next=12,j(s,a.thumbnail,"thumbnails");case 12:return O=e.sent,e.next=15,d({variables:{id:n,title:i,description:c,model_url:v.ref.fullPath,thumbnail_url:O.ref.fullPath}});case 15:return m=e.sent,e.abrupt("return",null===(u=m.data)||void 0===u?void 0:u.update_models_by_pk);case 19:e.prev=19,e.t0=e.catch(6),console.error(e.t0),l(new Error("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002"));case 23:return e.prev=23,r(!1),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[6,19,23,26]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.useEffect)((function(){u&&(console.error(u),l(new Error("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002")))}),[u]),{upload:v,loading:n,error:c}},sn=Object(q.a)({label:{display:"block",paddingBottom:40},button:{display:"flex",justifyContent:"center"}}),dn=function(e){var t,n,r=e.modelFile,a=e.thumbFile,i=sn(),c=Object($.h)().objId,l=Be({variables:{id:c}}).data,o=Object($.g)(),s=Object(D.d)(X),d=Object(S.useRef)(null),u=Object(S.useRef)(null),b=Object(S.useState)(),j=Object(E.a)(b,2),v=j[0],O=j[1],m=on(),h=m.upload,f=m.loading,p=m.error;return Object(S.useEffect)((function(){O(p)}),[p]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("label",{className:i.label,children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:"\u30bf\u30a4\u30c8\u30eb"}),Object(Q.jsx)(Ft.a,{size:"small",fullWidth:!0,variant:"outlined",inputRef:d,defaultValue:null===l||void 0===l||null===(t=l.models_by_pk)||void 0===t?void 0:t.title})]}),Object(Q.jsxs)("label",{className:i.label,children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:"\u8aac\u660e"}),Object(Q.jsx)(Ft.a,{size:"small",fullWidth:!0,variant:"outlined",multiline:!0,rows:4,inputRef:u,defaultValue:null===l||void 0===l||null===(n=l.models_by_pk)||void 0===n?void 0:n.description})]}),(null===v||void 0===v?void 0:v.message)&&Object(Q.jsx)("label",{className:i.label,children:Object(Q.jsx)(Ge.a,{color:"error",children:v.message})}),Object(Q.jsx)("div",{className:i.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",disabled:f,onClick:function(){var e,t,n;return O(void 0),(null===s||void 0===s?void 0:s.id)?r&&a?(null===(e=d.current)||void 0===e?void 0:e.value)?void h({modelId:null===l||void 0===l||null===(t=l.models_by_pk)||void 0===t?void 0:t.id,file:{model:r,thumbnail:a},title:d.current.value,description:null===(n=u.current)||void 0===n?void 0:n.value}).then((function(e){(null===e||void 0===e?void 0:e.id)&&o("/detail/".concat(c))})):O(new Error("\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002")):O(new Error("\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002")):O(new Error("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"))},children:f?"\u66f4\u65b0\u4e2d":"\u66f4\u65b0\u3059\u308b"})})]})},un=Object(q.a)({root:{minHeight:300},textPadding:{paddingTop:20,paddingBottom:10},button:{textAlign:"center",margin:"30px 0"},thumbnail:{paddingTop:"56.25%"}}),bn=function(e){var t=e.currentModelUrl,n=e.currentThumbUrl,r=e.modelFile,a=e.thumbFile,i=e.setModelFile,c=e.setThumbFile,l=un(),o=Object(S.useState)(t||""),s=Object(E.a)(o,2),d=s[0],u=s[1],b=Object(S.useState)(n||""),j=Object(E.a)(b,2),v=j[0],O=j[1],m=Object(S.useRef)(null),h=Object(S.useRef)(null);return Object(S.useEffect)((function(){if(r){var e=URL.createObjectURL(r);u(e)}}),[r]),Object(S.useEffect)((function(){if(a){var e=URL.createObjectURL(a);O(e)}}),[a]),Object(Q.jsxs)("div",{className:l.root,children:[d&&Object(Q.jsx)("div",{children:Object(Q.jsxs)(Ge.a,{className:l.textPadding,children:["\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\uff1a",null===r||void 0===r?void 0:r.name]})}),Object(Q.jsx)("div",{className:l.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",onClick:function(){var e;null===(e=m.current)||void 0===e||e.click()},children:"\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e"})}),Object(Q.jsx)(Je.a,{}),v&&Object(Q.jsxs)("div",{children:[Object(Q.jsxs)(Ge.a,{className:l.textPadding,children:["\u30b5\u30e0\u30cd\u30a4\u30eb\u30d5\u30a1\u30a4\u30eb\uff1a",null===a||void 0===a?void 0:a.name]}),Object(Q.jsx)(dt.a,{className:l.thumbnail,image:v})]}),Object(Q.jsx)("div",{className:l.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",onClick:function(){var e;null===(e=h.current)||void 0===e||e.click()},children:"\u30b5\u30e0\u30cd\u30a4\u30eb\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e"})}),Object(Q.jsx)("input",{type:"file",hidden:!0,ref:m,onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&i(e.currentTarget.files[0])}}),Object(Q.jsx)("input",{type:"file",hidden:!0,ref:h,onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&c(e.currentTarget.files[0])}})]})},jn=Object(q.a)({body:{marginTop:40,marginBottom:40}}),vn=function(){var e,t,n=jn(),r=Object(D.d)(cn),a=Object(D.d)(X),i=Object(S.useState)(),c=Object(E.a)(i,2),l=c[0],o=c[1],s=Object(S.useState)(),d=Object(E.a)(s,2),u=d[0],b=d[1],j=Object($.g)(),v=Object(S.useState)(!0),O=Object(E.a)(v,2)[1];console.log("accountLoaded(ModelUpdate page):",r),console.log("globalUser(ModelUpdate page):",a),Object(S.useEffect)((function(){r&&((null===a||void 0===a?void 0:a.id)||j("/login"))}),[r,null===a||void 0===a?void 0:a.id]);var m=Be({variables:{id:Object($.h)().objId}}).data;return Object(Q.jsxs)(L.a,{fullWidth:!0,maxWidth:"md",open:!0,children:[Object(Q.jsxs)(Jt.a,{children:["3D\u30e2\u30c7\u30eb\u306e\u66f4\u65b0",Object(Q.jsx)(M.a,{onClick:function(){O(!1),j("/")},children:Object(Q.jsx)(Yt.a,{})})]}),Object(Q.jsx)(Je.a,{}),Object(Q.jsx)(A.a,{className:n.body,children:(null===a||void 0===a?void 0:a.id)?Object(Q.jsxs)(ge.a,{container:!0,spacing:4,children:[Object(Q.jsx)(ge.a,{xs:!0,item:!0,children:Object(Q.jsx)(bn,{currentModelUrl:null===m||void 0===m||null===(e=m.models_by_pk)||void 0===e?void 0:e.model_url,currentThumbUrl:null===m||void 0===m||null===(t=m.models_by_pk)||void 0===t?void 0:t.thumbnail_url,modelFile:l,thumbFile:u,setModelFile:o,setThumbFile:b})}),Object(Q.jsx)(Je.a,{orientation:"vertical",flexItem:!0}),Object(Q.jsx)(ge.a,{xs:!0,item:!0,children:Object(Q.jsx)(dn,{modelFile:l,thumbFile:u})})]}):Object(Q.jsx)(ge.a,{container:!0,justifyContent:"center",children:Object(Q.jsx)(Vt.a,{size:50})})})]})},On=Object(q.a)({card:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10,padding:10},cardHeader:{width:240},unsubButton:{marginTop:10,marginLeft:10}}),mn=function(){var e,t=On(),n=Object(D.d)(X),r=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Se.a(Le,t)}({variables:{id:(null===n||void 0===n?void 0:n.id)||""}}),a=r.data,i=r.error,c=Qe(),l=c.unsubscribe,o=c.error,s=function(){var e=Object(pe.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({userid:t,subscribeId:n});case 2:o&&console.log(o.message);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=Te({refetchQueries:[{query:Pe}]}),u=Object(E.a)(d,2),b=u[0],j=u[1].error,v=function(){var e=Object(pe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({variables:{modelId:t}});case 2:j&&console.log(j.message);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.useEffect)((function(){i&&console.error(i)}),[i]),Object(Q.jsx)(xe.a,{children:Object(Q.jsx)(Q.Fragment,{children:null===a||void 0===a||null===(e=a.users_by_pk)||void 0===e?void 0:e.subscribersByUserid.map((function(e){return Object(Q.jsx)("div",{children:Object(Q.jsxs)(He.a,{className:t.card,children:[Object(Q.jsxs)("div",{children:[Object(Q.jsx)(Ke.a,{className:t.cardHeader,avatar:Object(Q.jsx)(_e.a,{src:e.subscribed.profile_photo_url||""}),title:e.subscribed.name}),Object(Q.jsx)(Ye.a,{variant:"contained",color:"default",startIcon:Object(Q.jsx)(tt.a,{}),onClick:function(){return s((null===n||void 0===n?void 0:n.id)||"",e.subscribed.id)},className:t.unsubButton,children:"\u767b\u9332\u89e3\u9664"})]}),Object(Q.jsx)(ge.a,{container:!0,spacing:2,children:e.subscribed.usersModelArrayRelation.map((function(e){return Object(Q.jsx)(ge.a,{item:!0,xs:3,children:Object(Q.jsx)(U.b,{to:"/detail/".concat(e.id),style:{textDecoration:"none"},children:Object(Q.jsx)(Bt,{title:e.title,views:e.views,created:e.created_at,fetcher:function(){return $t.ref(e.thumbnail_url).getDownloadURL()},onClick:function(){return v(e.id)}})})},e.id)}))})]})},e.subscribed.id)}))})})},hn=Object(q.a)({root:{display:"flex",flexDirection:"column",minHeight:300,justifyContent:"center",alignItems:"center"},textPadding:{paddingTop:20,paddingBottom:10},avatarFigure:{width:300,height:300,borderRadius:"100%",margin:"auto"},full:{width:"100%"},button:{marginTop:"2rem"}}),fn=function(e){var t=e.currentAvatarUrl,n=e.avatarFile,r=e.setAvatarFile,a=hn(),i=Object(S.useState)(t||""),c=Object(E.a)(i,2),l=c[0],o=c[1],s=Object(S.useRef)(null);return Object(S.useEffect)((function(){if(n){var e=URL.createObjectURL(n);o(e)}}),[n]),Object(Q.jsxs)("div",{className:a.root,children:[l&&Object(Q.jsx)("div",{className:a.full,children:Object(Q.jsx)(dt.a,{component:"img",src:l||"",className:a.avatarFigure})}),Object(Q.jsxs)("div",{className:a.button,children:[Object(Q.jsx)("input",{type:"file",hidden:!0,ref:s,onChange:function(e){var t;(null===(t=e.currentTarget.files)||void 0===t?void 0:t.length)&&r(e.currentTarget.files[0])}}),Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",onClick:function(){var e;null===(e=s.current)||void 0===e||e.click()},children:"\u753b\u50cf\u3092\u9078\u629e"})]})]})},pn=function(){var e=Object(S.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],a=Object(S.useState)(),i=Object(E.a)(a,2),c=i[0],l=i[1],o=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ne.a(Me,t)}({refetchQueries:[{query:qe}]}),s=Object(E.a)(o,2),d=s[0],u=s[1].error,b=Object(D.d)(X),j=function(e,t,n){if(t){var r=t.name.split(".").pop();return $t.ref("".concat(n,"/").concat(e,".").concat(r)).put(t)}return null},v=function(){var e=Object(pe.a)(fe.a.mark((function e(t){var n,a,i,c,o,s,u,v;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.file,a=t.name,t.description,i=t.userId,null===b||void 0===b?void 0:b.id){e.next=3;break}return e.abrupt("return");case 3:return r(!0),c=b.id,e.prev=5,e.next=8,j(c,n.avatar,"avatars");case 8:if(s=e.sent,u="",!s){e.next=16;break}return e.next=13,s.ref.getDownloadURL();case 13:u=e.sent,e.next=17;break;case 16:u=b.profile_photo_url||"";case 17:return e.next=19,d({variables:{id:i,name:a,profile_photo_url:u}});case 19:return v=e.sent,e.abrupt("return",null===(o=v.data)||void 0===o?void 0:o.update_users_by_pk);case 23:e.prev=23,e.t0=e.catch(5),console.error(e.t0),l(new Error("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002"));case 27:return e.prev=27,r(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[5,23,27,30]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.useEffect)((function(){u&&(console.error(u),l(new Error("\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u3066\u304f\u3060\u3055\u3044\u3002")))}),[u]),{loading:n,error:c,upload:v}},xn=Object(q.a)({label:{display:"block",paddingBottom:40},button:{display:"flex",justifyContent:"center"}}),gn=function(e){var t=e.avatarFile,n=xn(),r=Object(D.d)(X),a=Object(S.useRef)(null),i=Object(S.useRef)(null),c=Object(S.useState)(),l=Object(E.a)(c,2),o=l[0],s=l[1],d=pn(),u=d.upload,b=d.loading,j=d.error;return Object(S.useEffect)((function(){s(j)}),[j]),Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsxs)("label",{className:n.label,children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:"\u540d\u524d"}),Object(Q.jsx)(Ft.a,{size:"small",fullWidth:!0,variant:"outlined",inputRef:a,defaultValue:null===r||void 0===r?void 0:r.name})]}),Object(Q.jsxs)("label",{className:n.label,children:[Object(Q.jsx)(Ge.a,{variant:"body2",children:"\u8fd1\u6cc1"}),Object(Q.jsx)(Ft.a,{size:"small",fullWidth:!0,multiline:!0,rows:4,variant:"outlined",inputRef:i})]}),(null===o||void 0===o?void 0:o.message)&&Object(Q.jsx)("label",{className:n.label,children:Object(Q.jsx)(Ge.a,{color:"error",children:o.message})}),Object(Q.jsx)("div",{className:n.button,children:Object(Q.jsx)(Ye.a,{variant:"contained",color:"primary",disabled:b,onClick:function(){var e,n;return s(void 0),(null===r||void 0===r?void 0:r.id)?(null===(e=a.current)||void 0===e?void 0:e.value)?void u({file:{avatar:t},name:a.current.value,description:null===(n=i.current)||void 0===n?void 0:n.value,userId:r.id}):s(new Error("\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044")):s(new Error("\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044\u3002"))},children:b?"\u66f4\u65b0\u4e2d":"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u66f4\u65b0"})})]})},_n=Object(q.a)({body:{marginTop:40,marginBottom:40},closeButton:{position:"absolute",right:"1rem",top:"0.5rem",color:"gray"}}),wn=function(){var e=_n(),t=Object(D.d)(cn),n=Object(D.d)(X),r=Object(S.useState)(),a=Object(E.a)(r,2),i=a[0],c=a[1],l=Object($.g)();Object(S.useEffect)((function(){t&&((null===n||void 0===n?void 0:n.id)||l("/login"))}),[t,null===n||void 0===n?void 0:n.id]);var o=Object(S.useState)(!0),s=Object(E.a)(o,2),d=s[0],u=s[1],b=function(){u(!1),l("/")};return Object(Q.jsxs)(L.a,{fullWidth:!0,maxWidth:"md",open:d,onClose:b,children:[Object(Q.jsxs)(Jt.a,{children:["\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb",Object(Q.jsx)(M.a,{className:e.closeButton,onClick:b,children:Object(Q.jsx)(Yt.a,{})})]}),Object(Q.jsx)(Je.a,{}),Object(Q.jsx)(A.a,{className:e.body,children:(null===n||void 0===n?void 0:n.id)?Object(Q.jsxs)(ge.a,{container:!0,spacing:4,children:[Object(Q.jsx)(ge.a,{xs:!0,item:!0,children:Object(Q.jsx)(fn,{currentAvatarUrl:n.profile_photo_url||void 0,avatarFile:i,setAvatarFile:c})}),Object(Q.jsx)(Je.a,{orientation:"vertical",flexItem:!0}),Object(Q.jsx)(ge.a,{xs:!0,item:!0,children:Object(Q.jsx)(gn,{avatarFile:i})})]}):Object(Q.jsx)(ge.a,{container:!0,justifyContent:"center",children:Object(Q.jsx)(Vt.a,{size:50})})})]})},yn=function(){return Object($.j)([{element:Object(Q.jsx)(be,{}),children:[{path:"/",element:Object(Q.jsx)(zt,{})},{path:"upload",element:Object(Q.jsx)(ln,{})},{path:"profile",element:Object(Q.jsx)(wn,{})},{path:"channels",element:Object(Q.jsx)(mn,{})}]},{element:Object(Q.jsx)(ve,{}),children:[{path:"detail",element:Object(Q.jsx)($.a,{to:"/"})},{path:"detail/:objId",element:Object(Q.jsx)(Et,{})},{path:"detail/:objId/update",element:Object(Q.jsx)(vn,{})}]},{element:Object(Q.jsx)(me,{}),children:[{path:"login",element:Object(Q.jsx)(Ht,{})},{path:"signout",element:Object(Q.jsx)(Gt,{})},{path:"forget",element:Object(Q.jsx)(Lt,{})},{path:"404",element:Object(Q.jsx)("div",{children:"Not Found"})},{path:"*",element:Object(Q.jsx)($.a,{to:"/404"})}]},{path:"*",element:Object(Q.jsx)($.a,{to:"/404"})}])},kn=n(202),Nn=n(337),Sn=n(338),Cn=n(262),In=Object(Cn.a)({"@global":{html:{width:"100%",height:"100%"},body:{width:"100%",height:"100%"},"#root":{width:"100%",height:"100%"},img:{display:"block",maxWidth:"100%"}}})((function(){return null})),Rn=Object(D.b)({key:"AuthCredential",default:void 0}),Un=Object(D.b)({key:"AuthCredentialLoaded",default:!1}),$n=function(e){var t=e.children,n=Object(D.e)(Rn),r=Object(D.e)(Un);return Object(S.useEffect)((function(){return Ut.onAuthStateChanged(function(){var e=Object(pe.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((null===t||void 0===t?void 0:t.uid)||void 0),r(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),Object(Q.jsx)(Q.Fragment,{children:t})},En=function(e){var t=e.children,n=function(e){var t=Object(we.a)(Object(we.a)({},Ie),e);return Ce.a(qe,t)}(),r=Object(E.a)(n,2),a=r[0],i=r[1],c=i.data,l=i.error,o=i.loading,s=Object(D.c)(X),d=Object(E.a)(s,2),u=d[0],b=d[1],j=Object(D.d)(Rn),v=Object(D.d)(Un),O=Object(D.e)(cn);return Object(S.useEffect)((function(){v&&(j?o||(null===u||void 0===u?void 0:u.id)||(O(!1),a({variables:{id:j}})):(null===u||void 0===u?void 0:u.id)&&b(void 0))}),[j,v]),Object(S.useEffect)((function(){var e;v&&!o&&((null===c||void 0===c||null===(e=c.users_by_pk)||void 0===e?void 0:e.id)&&j?b(c.users_by_pk):(null===u||void 0===u?void 0:u.id)&&b(void 0),O(!0))}),[v,c]),Object(S.useEffect)((function(){(null===l||void 0===l?void 0:l.message)&&(console.error(null===l||void 0===l?void 0:l.message),b(void 0))}),[l]),Object(Q.jsx)(Q.Fragment,{children:t})},Fn=n(203),Tn=n(340),Mn=n(342),Ln=n(336),An=n(201),Bn=Object(Fn.a)({uri:"https://react-3d.hasura.app/v1/graphql"}),Pn=Object(An.a)(Object(pe.a)(fe.a.mark((function e(){var t,n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=Ut.currentUser)||void 0===t?void 0:t.getIdToken(!0);case 2:return n=e.sent,r=n?{Authorization:"Bearer ".concat(n)}:{},e.abrupt("return",{headers:r});case 5:case"end":return e.stop()}}),e)})))),Dn=new Tn.a({link:Pn.concat(Bn),cache:new Mn.a}),Wn=function(e){var t=e.children;return Object(Q.jsx)(Ln.a,{client:Dn,children:t})},qn=Object(kn.a)();R.a.render(Object(Q.jsx)(C.a.StrictMode,{children:Object(Q.jsx)(D.a,{children:Object(Q.jsx)(Nn.a,{theme:qn,children:Object(Q.jsx)(Wn,{children:Object(Q.jsx)($n,{children:Object(Q.jsx)(En,{children:Object(Q.jsxs)(U.a,{children:[Object(Q.jsx)(Sn.a,{}),Object(Q.jsx)(In,{}),Object(Q.jsx)(yn,{})]})})})})})})}),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.c72d7a28.chunk.js.map